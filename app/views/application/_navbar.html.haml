%nav.navbar.navbar-expand-lg.navbar-light.bg-light
  %a.navbar-brand{href: '/'} FairCustodian
  %button.navbar-toggler{type: 'button', data: {toggle: 'collapse', target: '#navbarSupportedContent'}}
    %span.navbar-toggler-icon

  #navbarSupportedContent.collapse.navbar-collapse
    %ul.navbar-nav.mr-auto
      - if current_user && current_user.admin
        %li.nav-item.dropdown.mx-3
          %a.nav-link.dropdown-toggle#navbarDropdown{href: '#', data: {toggle: 'dropdown'}}
            Admin
          .dropdown-menu
            %a.dropdown-item{href: oauth_applications_path} OAuth Applications
            %a.dropdown-item{href: oauth_authorized_applications_path} Authorised Applications
            %a.dropdown-item{href: sidekiq_web_path} Sidekiq
      

    %ul.navbar-nav.flex-row.ml-md-auto
      - if !current_user
        %li.nav-item.mx-3
          = link_to 'Sign up', new_user_registration_path
        %li.nav-item.mx-3
          = link_to 'Sign in', new_user_session_path
      - elsif current_user && !current_user.stripe_subscription_id.nil?
        %li.nav-item.mx-3
          = link_to 'Cancel Subscription', charge_path(current_user.stripe_subscription_id), method: :delete
        %li.nav-item.mr-auto
          = link_to 'Log Out', destroy_user_session_path, method: :delete
      - else
        %li.nav-item.mr-auto
          = link_to 'Log Out', destroy_user_session_path, method: :delete